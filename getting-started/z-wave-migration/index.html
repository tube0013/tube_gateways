
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="tube">
      
      
        <link rel="canonical" href="https://tube0013.github.io/tube_gateways/getting-started/z-wave-migration/">
      
      
        <link rel="prev" href="../z-wave/">
      
      
        <link rel="next" href="../router/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Z-Wave Migration (Advanced) - TubesZB Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#advanced-migrating-an-existing-z-wave-network" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="TubesZB Documentation" class="md-header__button md-logo" aria-label="TubesZB Documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TubesZB Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Z-Wave Migration (Advanced)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../zigbee/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../zigbee-coordinators/" class="md-tabs__link">
          
  
  
  Zigbee Coordinators

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../zigbee-routers/cc2652-based-routers/" class="md-tabs__link">
          
  
  
  Zigbee Routers

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../zwave-kits/" class="md-tabs__link">
        
  
  
    
  
  Z-Wave Kits

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../dual-radio-kits/" class="md-tabs__link">
        
  
  
    
  
  Dual Radio Kits

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../bluetooth-proxy/" class="md-tabs__link">
        
  
  
    
  
  Bluetooth Proxy

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../model-glossary/" class="md-tabs__link">
        
  
  
    
  
  Model Glossary

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../troubleshooting/" class="md-tabs__link">
        
  
  
    
  
  Troubleshooting

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="TubesZB Documentation" class="md-nav__button md-logo" aria-label="TubesZB Documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    TubesZB Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../zigbee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zigbee Coordinators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../z-wave/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Z-Wave Kits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Z-Wave Migration (Advanced)
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Z-Wave Migration (Advanced)
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-to-use-this-guide" class="md-nav__link">
    <span class="md-ellipsis">
      When to Use This Guide
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-back-up-the-existing-controller" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1 – Back Up the Existing Controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 1 – Back Up the Existing Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download-the-backup-from-home-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      Download the backup from Home Assistant
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-prepare-the-tubeszb-controller" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2 – Prepare the TubesZB Controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-restore-the-nvm-backup" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3 – Restore the NVM Backup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-verify-home-assistant-and-rebuild-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4 – Verify Home Assistant and Rebuild Routes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-clean-up-and-update-backups" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5 – Clean Up and Update Backups
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-reading" class="md-nav__link">
    <span class="md-ellipsis">
      Further Reading
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../router/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zigbee Routers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bluetooth-proxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bluetooth Proxy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Zigbee Coordinators
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Zigbee Coordinators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zigbee-coordinators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zigbee-coordinators/efr32-based/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EFR32 Based
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zigbee-coordinators/cc2652-based/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CC2652 Based
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zigbee-coordinators/firmware-updates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Firmware Updates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zigbee-coordinators/efr32-based/legacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EFR32 Legacy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zigbee-coordinators/cc2652-based/legacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CC2652 Legacy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Zigbee Routers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Zigbee Routers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zigbee-routers/cc2652-based-routers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CC2652 Based Routers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zigbee-routers/efr32-based-routers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EFR32 Based Routers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zwave-kits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Z-Wave Kits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dual-radio-kits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dual Radio Kits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bluetooth-proxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bluetooth Proxy
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model Glossary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-to-use-this-guide" class="md-nav__link">
    <span class="md-ellipsis">
      When to Use This Guide
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-back-up-the-existing-controller" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1 – Back Up the Existing Controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 1 – Back Up the Existing Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download-the-backup-from-home-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      Download the backup from Home Assistant
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-prepare-the-tubeszb-controller" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2 – Prepare the TubesZB Controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-restore-the-nvm-backup" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3 – Restore the NVM Backup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-verify-home-assistant-and-rebuild-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4 – Verify Home Assistant and Rebuild Routes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-clean-up-and-update-backups" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5 – Clean Up and Update Backups
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-reading" class="md-nav__link">
    <span class="md-ellipsis">
      Further Reading
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="advanced-migrating-an-existing-z-wave-network">Advanced: Migrating an Existing Z-Wave Network</h1>
<p>Migrating your Z-Wave mesh to a TubesZB network controller lets you retire a USB stick without re-including every device. This guide focuses on migrations performed entirely inside <strong>Z-Wave JS UI</strong> while connecting to the TubesZB controller over TCP (<code>tcp://</code>).</p>
<div class="admonition warning">
<p class="admonition-title">Read this first</p>
<p>Migrations copy the controller's Non-Volatile Memory (NVM). If anything goes wrong you may lose access to your devices until the original controller is restored. </p>
</div>
<h2 id="when-to-use-this-guide">When to Use This Guide</h2>
<p>Use these instructions when you already run Home Assistant with the <strong>Z-Wave JS</strong> or <strong>Z-Wave JS UI</strong> add-on (or a separate Z-Wave JS UI instance) and want to move the existing network to one of the following TubesZB controllers:</p>
<ul>
<li>Z-Wave PoE kit (single radio) – TCP port <code>6638</code></li>
<li>Dual radio PoE kit – Z-Wave available on TCP port <code>6639</code></li>
</ul>
<p>If you are starting from scratch, follow the standard <a href="../z-wave/">Z-Wave Getting Started guide</a> instead.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Before you touch any hardware, confirm the following:</p>
<ul>
<li><strong>Z-Wave JS UI access</strong>: You can open the web UI for the instance that manages your current Z-Wave network.</li>
<li><strong>Security keys recorded</strong>: Copy the existing <code>S2 Access Control</code>, <code>S2 Authenticated</code>, <code>S2 Unauthenticated</code>, and <code>S0 Legacy</code> keys from the current controller. Reusing the exact values is mandatory for secure devices to function after the migration.</li>
<li><strong>Old controller firmware</strong>: Update the firmware on the controller you are migrating <em>from</em> to the latest vendor release (SDK 7.19.x+ for 800-series radios is strongly recommended). Updated firmware fixes NVM compatibility bugs that can block migration.</li>
<li><strong>Home Assistant 2023.9 or newer</strong>: Required for the most recent <code>zwave_js</code> integration features referenced here.</li>
<li><strong>TubesZB controller on your network</strong>: The device is powered on, reachable over the LAN, and you know its IP address (or hostname). Assign a DHCP reservation so the address does not change mid-migration.</li>
</ul>
<h2 id="step-1-back-up-the-existing-controller">Step 1 – Back Up the Existing Controller</h2>
<ol>
<li>Open <strong>Z-Wave JS UI</strong> for your current controller.</li>
<li>Go to <strong>Settings → Z-Wave → Security Keys</strong> and copy the four key values to a safe location (password manager or encrypted notes).</li>
<li>Scroll to the bottom of the page and select <strong>Advanced Actions</strong>.</li>
<li>Under <strong>NVM Management</strong>, click <strong>Backup</strong>.</li>
<li>Wait for the <code>.bin</code> (or <code>.nvm</code>) file to download. Verify the file size is larger than 100 kB; small files usually indicate a failed backup.</li>
</ol>
<figure>
<p><img alt="Z-Wave JS UI NVM Management dialog" src="../../assets/zwavejsui-nvm-management.png" width="600" />
  </p>
<figcaption>Use the NVM Management panel in Z-Wave JS UI to create the backup you will restore onto the TubesZB controller.</figcaption>
</figure>
<h3 id="download-the-backup-from-home-assistant">Download the backup from Home Assistant</h3>
<p>Backing up from the Home Assistant UI is useful when you do not have direct access to Z-Wave JS UI or want a second copy of the data.</p>
<p><strong>Why create a backup?</strong>
:   It is recommended to create a backup before making major changes to your Z-Wave network, such as migrating between adapters or resetting hardware. The backup captures the adapter's Non-Volatile Memory (NVM), including your node and security information, in a binary file that you can download.</p>
<p><strong>Prerequisites</strong>
:   Administrator rights in Home Assistant.</p>
<p><strong>To download the backup</strong>
1. In Home Assistant, go to <strong>Settings → Devices &amp; services</strong>.
2. Select the <strong>Z-Wave</strong> integration.
3. Choose the <strong>cogwheel</strong> icon to open the integration options.
4. Under <strong>Backup and restore</strong>, select <strong>Download backup</strong>.
5. Confirm the browser downloads the file on the device you are using to access Home Assistant.</p>
<div class="admonition tip">
<p class="admonition-title">Using the Z-Wave JS add-on (no UI)</p>
<p>If you still run the legacy <strong>Z-Wave JS</strong> add-on without the UI, install the <strong>Z-Wave JS UI</strong> add-on alongside it, stop the <strong>Z-Wave JS</strong> add-on, start the UI version, and point it to your existing USB stick. Once the UI sees your nodes, you can take the NVM backup from the UI and continue the migration.</p>
<p>Alternatively, download the backup from within Home Assistant:</p>
<ol>
<li>In Home Assistant, go to <strong>Settings → Devices &amp; services</strong>.</li>
<li>Select the <strong>Z-Wave</strong> integration and choose the <strong>cogwheel</strong> icon.</li>
<li>Under <strong>Backup and restore</strong>, select <strong>Download backup</strong>. The file saves to the device you are using.</li>
<li>Stop the <strong>Z-Wave JS</strong> add-on and disable auto-start.</li>
<li>Remove your old controller.</li>
</ol>
</div>
<h2 id="step-2-prepare-the-tubeszb-controller">Step 2 – Prepare the TubesZB Controller</h2>
<ol>
<li>Make sure the TubesZB hardware is powered and connected to your network.</li>
<li>In <strong>Z-Wave JS UI</strong>, stay on <strong>Settings → Z-Wave</strong> and populate the <strong>Serial Port</strong> field with the TCP path to the TubesZB kit. Examples:</li>
<li>Single radio kit: <code>tcp://192.168.1.42:6638</code></li>
<li>Dual radio kit (Z-Wave side): <code>tcp://192.168.1.42:6639</code></li>
<li>Paste the security keys you collected in Step 1 into the matching fields. Do <strong>not</strong> generate new keys when migrating an existing mesh.</li>
<li>Click <strong>Save</strong>. The service will restart and attempt to reach the new controller over TCP.</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Only one controller at a time</p>
<p>After clicking <strong>Save</strong>, immediately unplug or power down the old USB controller. Running two controllers with the same Home ID at once can corrupt your mesh and create routing chaos.</p>
</div>
<h2 id="step-3-restore-the-nvm-backup">Step 3 – Restore the NVM Backup</h2>
<ol>
<li>In <strong>Z-Wave JS UI</strong>, open <strong>Advanced Actions → NVM Management</strong> again.</li>
<li>Choose <strong>Restore</strong> and upload the backup file you created in Step 1.</li>
<li>Wait for the progress dialog to reach 100%. Do not close the browser or refresh the page.</li>
<li>When prompted, allow Z-Wave JS UI to restart the controller.</li>
<li>After the restart completes, the controller should display the same Home ID as the old stick, and your devices will appear in the control panel.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">RF region and power</p>
<p>Double-check <strong>Settings → Z-Wave → RF Region</strong>. Z-Wave JS should auto select the correct region if not select the region that matches your regulatory requirements before you restore the NVM. Changing the region afterwards requires another restore.</p>
</div>
<h2 id="step-4-verify-home-assistant-and-rebuild-routes">Step 4 – Verify Home Assistant and Rebuild Routes</h2>
<ol>
<li>Open <strong>Settings → Devices &amp; Services</strong> in Home Assistant and ensure the existing <code>Z-Wave JS</code> integration shows as <strong>Connected</strong>. If it is unavailable, select <strong>Configure</strong> and confirm that the WebSocket URL still points to your Z-Wave JS UI instance (typically <code>ws://a0d7b954-zwavejsui:3000</code>).</li>
<li>In <strong>Z-Wave JS UI</strong>, review a few nodes to confirm their interview status is <strong>Complete</strong>.</li>
<li>Launch <strong>Advanced Actions → Rebuild Routes</strong>.</li>
<li>Enable <strong>Include sleeping nodes</strong> so battery-powered devices refresh their paths.</li>
<li>Enable <strong>Delete priority return routes</strong> to discard stale manual routes from the old controller.</li>
<li>Monitor the control panel for failed nodes. Wake sleeping devices manually if needed to finish the rebuild.</li>
<li>Once the rebuild finishes, verify automations and entities in Home Assistant behave as expected.</li>
</ol>
<h2 id="step-5-clean-up-and-update-backups">Step 5 – Clean Up and Update Backups</h2>
<ul>
<li>Archive the NVM backup you created in Step 1 along with a fresh backup taken from the TubesZB controller after the restore.</li>
<li>Label the old USB stick and store it powered off. Do not plug it back in unless you intend to roll back to it.</li>
<li>Update any documentation or diagrams that list the controller address so they reference the <code>tcp://</code> endpoint.</li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<p><strong>Controller refuses the TCP connection</strong>
:   Confirm the TubesZB kit is running the latest ESPHome firmware and that your firewall allows outbound TCP 6638/6639 from Home Assistant.</p>
<p><strong>Nodes show as failed or missing after restore</strong>
:   Wake battery devices, then run <strong>Advanced Actions → Heal Node</strong> on problematic nodes. If secure devices still fail, verify the security keys exactly match the originals (no extra whitespace).</p>
<p><strong>Home Assistant keeps rediscovering a second controller</strong>
:   You may have left the old USB stick connected. Remove it, reboot Home Assistant, and clear ignored discovery notifications.</p>
<p><strong>Restoring the NVM fails immediately</strong>
:   The old controller firmware may pre-date the TubesZB controller's stack version. Update the original controller to a newer SDK, re-connect it temporarily, create a fresh backup, and try again.</p>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><a href="https://www.home-assistant.io/integrations/zwave_js/#migrating-a-z-wave-network-to-a-new-adapter">Home Assistant: Migrating a Z-Wave network to a new adapter</a></li>
<li><a href="https://support.nabucasa.com/hc/en-us/articles/29529265751965">Nabu Casa: Migrating an existing Z-Wave network to Home Assistant Connect ZWA-2</a></li>
<li><a href="https://zwave-js.github.io/zwave-js-ui/">Z-Wave JS UI Documentation</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.tabs", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>